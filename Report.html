<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        AS Lab 3 - Identity and Access Management (IAM) - 1 - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.markmap-container{height:300px}.markmap-container>svg{width:100%;height:100%}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><center>
<h1 id="AS-Lab-3---Identity-and-Access-Management-IAM---1" data-id="AS-Lab-3---Identity-and-Access-Management-IAM---1"><a class="anchor hidden-xs" href="#AS-Lab-3---Identity-and-Access-Management-IAM---1" title="AS-Lab-3---Identity-and-Access-Management-IAM---1"><span class="octicon octicon-link"></span></a><span>AS Lab 3 - Identity and Access Management (IAM) - 1</span></h1>
<p><strong><span>Name: Vladimir Shelkovnikov</span></strong><br>
<span>—</span></p>
</center><h2 id="Task-1---Preparation" data-id="Task-1---Preparation"><a class="anchor hidden-xs" href="#Task-1---Preparation" title="Task-1---Preparation"><span class="octicon octicon-link"></span></a><span>Task 1 - Preparation</span></h2><p><span>I launched the keycloak docker image using the command </span><code>docker run -p 8081:8080 -e KEYCLOAK_ADMIN=st12 -e KEYCLOAK_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:17.0.1 start-dev -Dkeycloak.profile.feature.upload_scripts=enabled</code><span>.</span><br>
<span>I added the line </span><strong><span>127.0.0.1       sso</span></strong><span> to the </span><strong><span>/etc/hosts</span></strong><span> file.</span></p><p><span>I can access it via </span><strong><span>sso:8081</span></strong><span>, as shown in Figure 1.</span></p><center>
<p><img src="https://i.imgur.com/91fxARV.png" alt="" loading="lazy"><br>
<span>Figure 1 - Keyclock</span></p>
</center><p><span>I opened the Keycloak Admin Console and created a new realm called </span><strong><span>as_lab</span></strong><span>. After that, I create a </span><strong><span>sample</span></strong><span> user in this realm, as shown in Figure 2.</span></p><center>
<p><img src="https://i.imgur.com/1Bql4g4.png" alt="" loading="lazy"><br>
<span>Figure 2 - Creating sample user</span></p>
</center><p><span>Then I configured and launched the next.js application (Figure 3).</span></p><center>
<p><img src="https://i.imgur.com/dPDhbsy.png" alt="" loading="lazy"><br>
<span>Figure 3 - Running application with </span><strong><span>yarn dev</span></strong></p>
</center><p><span>I can access it via </span><strong><span>localhost:3068</span></strong><span> (Figure 4).</span></p><center>
<p><img src="https://i.imgur.com/uXa3HAo.png" alt="" loading="lazy"><br>
<span>Figure 4 - Web page</span></p>
</center><h2 id="Task-2---Authentication-and-Single-Sign-On" data-id="Task-2---Authentication-and-Single-Sign-On"><a class="anchor hidden-xs" href="#Task-2---Authentication-and-Single-Sign-On" title="Task-2---Authentication-and-Single-Sign-On"><span class="octicon octicon-link"></span></a><span>Task 2 - Authentication and Single-Sign On</span></h2><div class="alert alert-success">
<h3 id="1-Before-you-begin-you-must-get-familiar-with-terminology-and-concepts-of-OAuth-20-and-OpenID-Connect" data-id="1-Before-you-begin-you-must-get-familiar-with-terminology-and-concepts-of-OAuth-20-and-OpenID-Connect"><a class="anchor hidden-xs" href="#1-Before-you-begin-you-must-get-familiar-with-terminology-and-concepts-of-OAuth-20-and-OpenID-Connect" title="1-Before-you-begin-you-must-get-familiar-with-terminology-and-concepts-of-OAuth-20-and-OpenID-Connect"><span class="octicon octicon-link"></span></a><span>1. Before you begin you must get familiar with terminology and concepts of OAuth 2.0 and OpenID Connect.</span></h3>
</div><hr><blockquote>
<p><span>What is client?</span></p>
<blockquote>
<p><span>The client is one of the roles in OAuth. It is a system that interacts with the user to access protected resources. An access token is used to access it.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What client types exist?</span></p>
<blockquote>
<p><span>There are two types of clients - confidential and public.</span><br>
<span>The difference between them is the ability to save their credentials - a confidential one can do it, but a public one can’t.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What authentication flows exist?</span></p>
<blockquote>
<p><span>There are 4 main authentication flows:</span><br>
<span>Authorization Code is obtained by using an authorization server as an intermediary between the client and resource owner;</span></p>
</blockquote>
<blockquote>
<p><span>Implicit is a simplified authorization code flow optimized for clients implemented in a browser using a JavaScript;</span></p>
</blockquote>
<blockquote>
<p><span>Resource owner password credentials (i.e., username and password) can be used directly as an authorization grant to obtain an access token.  The credentials should only be used when there is a high degree of trust;</span></p>
</blockquote>
<blockquote>
<p><span>Client credentials are used as an authorization grant typically when the client is acting on its own behalf (the client is also the resource owner);</span></p>
</blockquote>
<blockquote>
<p><span>But according to the specification, these types can be extended (Hybrid, Device Authorization, Authorization Code with PKCE).</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>Why is Authorization Code Flow preferred over the others?</span></p>
<blockquote>
<p><span>Well, this provides more security when transferring the access token, since it does it directly to the client, without passing it through the user agent, where others can access it, including the owner of the resource.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What is Single-Sign On (SSO)?</span></p>
<blockquote>
<p><span>It is an authentication method that provides multiple authentications of applications and websites using only one set of credentials.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What is the difference between OAuth 2.0 and OpenID Connect?</span></p>
<blockquote>
<p><span>OAuth 2.0 is more about authorization (what you can do?) while OpenID is authentication (who you are?) + SSO. But OAuth can also provide authentication.</span></p>
</blockquote>
</blockquote><hr><div class="alert alert-success">
<h3 id="2-Setup-authentication" data-id="2-Setup-authentication"><a class="anchor hidden-xs" href="#2-Setup-authentication" title="2-Setup-authentication"><span class="octicon octicon-link"></span></a><span>2. Setup authentication</span></h3>
</div><p><span>For the pokemon-app, I created a client as shown in Figure 5.</span></p><center>
<p><img src="https://i.imgur.com/TL7wE27.png" alt="" loading="lazy"><br>
<span>Figure 5 - Creating client</span></p>
</center><p><span>After I clicked the login button and logged in as </span><strong><span>sample</span></strong><span> user, I got the following page (Figure 6).</span></p><center>
<p><img src="https://i.imgur.com/CfUohj2.png" alt="" loading="lazy"><br>
<span>Figure 6 - pokemon-app</span></p>
</center><p><span>I did the same for the app-trainer (Figure 7). There was no login page, after clicking on the button, it logged in using data from the previous application.</span></p><center>
<p><img src="https://i.imgur.com/pTCTiqc.png" alt="" loading="lazy"><br>
<span>Figure 7 - app-trainer</span></p>
</center><div class="alert alert-success">
<h3 id="3-Analyze-SSO-workflow" data-id="3-Analyze-SSO-workflow"><a class="anchor hidden-xs" href="#3-Analyze-SSO-workflow" title="3-Analyze-SSO-workflow"><span class="octicon octicon-link"></span></a><span>3. Analyze SSO workflow.</span></h3>
</div><hr><blockquote>
<p><span>What authentication flow is used?</span></p>
<blockquote>
<p><span>This is a bit tricky because the client and the resource owner are the same machines. But still, we used the authentication code (Figure 8), which we send to keycloak, which provides us with tokens (Figure 9).</span></p>
</blockquote>
</blockquote><center>
<p><img src="https://i.imgur.com/HHe0q9G.png" alt="" loading="lazy"><br>
<span>Figure 8 - Authorization code</span></p>
<p><img src="https://i.imgur.com/WCIcX8l.png" alt="" loading="lazy"><br>
<span>Figure 9 - Tokens</span></p>
</center><div class="alert alert-success">
<h3 id="4-Enabling-authorization" data-id="4-Enabling-authorization"><a class="anchor hidden-xs" href="#4-Enabling-authorization" title="4-Enabling-authorization"><span class="octicon octicon-link"></span></a><span>4. Enabling authorization</span></h3>
<p><span>4.1 Keycloak issues access tokens in JWT format. The advantage of JWT token is that all information that is required to make a decision about authorization can be extracted and verified from it.</span></p>
</div><hr><blockquote>
<p><span>What is the format of JWT token? How can you decode it, is there any standard tools?</span></p>
<blockquote>
<p><span>JWT is JSON object that is base64 encrypted and encrypted/signed. It can be decoded using </span><a href="http://JWT.IO" target="_blank" rel="noopener"><span>JWT.IO</span></a><span> or cyberchef. If I tried to decode it as base64 I can get the header - algorithm, type (“JWT”) and KeyID(kid). Payload encoded with algorithm and base64(Figure 10).</span></p>
</blockquote>
</blockquote><center>
<p><img src="https://i.imgur.com/VwIkSab.png" alt="" loading="lazy"><br>
<span>Figure 10 - Payload</span></p>
</center><hr><blockquote>
<p><span>How is JWT token issued and verified?</span></p>
<blockquote>
<p><span>The JWT token contains 3 parts (JSON encoded object) - header, payload and signature. For the first two parts, it creates a buffer, which is then encoded as base64. The signature is different, it is a hash with a secret and encoded header.payload in base64. The result is a header.payload.signature. Since the </span><strong><span>secret</span></strong><span> is known only to the server, only it can issue new tokens with a valid signature. Users cannot forge tokens because knowledge of the secret is required to create a valid signature for the token. So our API uses the certificate as a secret, when we send a request keycloak uses its public key to decode it. To check the JWT, it compares the signatures. If the value in the JWT is not equal to the generated one, the token is invalid.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What is claim and what is scope?</span></p>
<blockquote>
<p><span>Claims are pieces of information asserted about a subject (name, email) in an access token. Scopes are groups of claims.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What is aud claim?</span></p>
<blockquote>
<p><span>The aud claim identifies the recipients that the JWT is intended for.</span></p>
</blockquote>
</blockquote><hr><div class="alert alert-success">
<h3 id="44-Verification-in-the-application" data-id="44-Verification-in-the-application"><a class="anchor hidden-xs" href="#44-Verification-in-the-application" title="44-Verification-in-the-application"><span class="octicon octicon-link"></span></a><span>4.4 Verification in the application</span></h3>
<p><span>Look at how the api-pokemon makes authorization decision and list the critical claims that are required for positive decision.</span><br>
<span>File: server/verify-access.ts</span></p>
</div><p><span>It checks if there is an authorization header with the “Bearer” type. Then it checks the payload - it is not null and has the type object. If everything is in order, it checks whether the service (api-pokemon) in the “resource access” section has allowed roles.</span></p><div class="alert alert-success">
<h3 id="45-Create-corresponding-clients-and-add-roles" data-id="45-Create-corresponding-clients-and-add-roles"><a class="anchor hidden-xs" href="#45-Create-corresponding-clients-and-add-roles" title="45-Create-corresponding-clients-and-add-roles"><span class="octicon octicon-link"></span></a><span>4.5 Create corresponding clients and add roles</span></h3>
<p><span>Make changes to Keycloak such that correct required claims are included into access token.</span><br>
<span>Show that app-pokemon successfully works.</span></p>
<p><span>Note that for app-pokemon you already have associated client in Keycloak. Also Keycloak provides a special bearer-only type of client - it is for services that do not initiate user login.</span></p>
<p><span>Also, for debugging purposes Keycloak’s Admin console provides Evaluation tool that shows you what is included inside access token.</span></p>
<p><span>For valid JWT verification do not forget to replace hardcoded cert (in server/verify-access.ts) with the cert of your realm.</span></p>
</div><hr><blockquote>
<p><span>What are realm roles and client roles in Keycloak?</span></p>
<blockquote>
<p><span>Keycloak roles are used to grant identical permissions to all users with the same roles. Realm roles are more like a global variable that can be used by any client, while a client role can be used locally by a dedicated client.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>What is a composite role?</span></p>
<blockquote>
<p><span>Composite role - allows you not to give each role separately, but to give one composite role that contains several necessary roles.</span></p>
</blockquote>
</blockquote><hr><blockquote>
<p><span>How does browser-side app app-pokemon understand that form input should be enabled/disabled?</span></p>
<blockquote>
<p><span>Figure 11 shows the required code snippet.</span></p>
</blockquote>
</blockquote><center>
<p><img src="https://i.imgur.com/QqByXa2.png" alt="" loading="lazy"><br>
<span>Figure 11 - isEditable?</span></p>
</center><blockquote>
<blockquote>
<p><span>It uses the useMemo hook to set the isEditable attribute. If we authenticate to keycloak with the editor role for the api-pokemon client, input will be enabled, otherwise - disabled.</span></p>
</blockquote>
</blockquote><hr><p><span>I created a new client as shown in Figure 12.</span></p><center>
<p><img src="https://i.imgur.com/UeO1tZO.png" alt="" loading="lazy"><br>
<span>Figure 12 - api-pokemon</span></p>
</center><p><span>After that, I changed its access type to bearer-only and created two client roles (Figure 13).</span></p><center>
<p><img src="https://i.imgur.com/aR1eEOB.png" alt="" loading="lazy"><br>
<span>Figure 13 - Client roles</span></p>
</center><p><span>To be able to use them, I added them to the </span><strong><span>sample</span></strong><span> user as shown in Figure 14</span></p><center>
<p><img src="https://i.imgur.com/1MMTQYO.png" alt="" loading="lazy"><br>
<span>Figure 14 - Role mappings</span></p>
</center><p><span>Then in </span><strong><span>Realm setting&gt;Keys</span></strong><span> I took the certificate for </span><strong><span>RS256</span></strong><span> and added it to </span><strong><span>verify-access</span></strong><span>. After that, when I log in, I see that I have two roles - readonly and editor. Thus, I am able to get pokemon card and edit its data (Figure 15).</span></p><center>
<p><img src="https://i.imgur.com/xlDkCrX.png" alt="" loading="lazy"><br>
<span>Figure 15 - Pokemon card</span></p>
</center><hr><div class="alert alert-success">
<h3 id="5-Issuing-fine-grained-access-token" data-id="5-Issuing-fine-grained-access-token"><a class="anchor hidden-xs" href="#5-Issuing-fine-grained-access-token" title="5-Issuing-fine-grained-access-token"><span class="octicon octicon-link"></span></a><span>5. Issuing fine-grained access token</span></h3>
<p><span>By default Keycloak includes all available user roles from all clients into the access token. Considering least privilege principal, that should be fixed.</span></p>
<p><span>5.1 Create another test-client with some-role and add this role to the sample user. After that inspect access_token token for app-pokemon. Is new role automatically included into it?</span></p>
<p><span>5.2 Learn how exactly user information that Keycloak possesses is mapped inside to access token. Make changes to Keycloak such that for app-pokemon only api-pokemon roles are mapped to the access token, even if he has other roles.</span></p>
<blockquote>
<p><span>Keycloak Admin Console provides scope evaluation tool for debugging purposes.</span></p>
</blockquote>
</div><p><span>I created a new client called </span><strong><span>test-client</span></strong><span> and added </span><strong><span>some-role</span></strong><span> to it. Then I set up this role for the </span><strong><span>sample</span></strong><span> user. Thus, it also appeared in token, as shown in Figure 16.</span></p><center>
<p><img src="https://i.imgur.com/nce6P80.png" alt="" loading="lazy"><br>
<span>Figure 16 - Token</span></p>
</center><p><span>To fix this, I changed the </span><strong><span>Scope</span></strong><span> configuration for app-pokemon as shown in Figure 17.</span></p><center>
<p><img src="https://i.imgur.com/haP7CvN.png" alt="" loading="lazy"><br>
<span>Figure 17 - Scope</span></p>
</center><p><span>Here I have disabled the </span><strong><span>Full Scope</span></strong><span> and set the editor and readonly roles only. So, if I decrypt the token now, I should only see  these roles (Figure 18).</span></p><center>
<p><img src="https://i.imgur.com/xI7CPta.png" alt="" loading="lazy"><br>
<span>Figure 18 - Roles in the access token</span></p>
</center><hr><blockquote>
<p><span>How is claim added to access token?</span></p>
<blockquote>
<p><span>Claims are added via Client Scopes (Figure 19).</span></p>
</blockquote>
</blockquote><center>
<p><img src="https://i.imgur.com/2i8poaS.png" alt="" loading="lazy"><br>
<span>Figure 19 - Client Scopes</span></p>
</center><p><span>Here we need only roles scope. So I can leave only this one. Then token will contain olny roles claims as shown in Figure 20.</span></p><center>
<p><img src="https://i.imgur.com/tUodnhP.png" alt="" loading="lazy"><br>
<span>Figure 20 - Token</span></p>
</center><p><span>When we add a claim, it uses a mapper to write the value to the access token.</span></p><hr><div class="alert alert-success">
<h3 id="6-Custom-scopes" data-id="6-Custom-scopes"><a class="anchor hidden-xs" href="#6-Custom-scopes" title="6-Custom-scopes"><span class="octicon octicon-link"></span></a><span>6. Custom scopes</span></h3>
<p><span>Keycloak allows you to create your custom scopes to include additional information to access token, for example custom user attribute.</span></p>
<p><span>Make changes to Keycloak such that access token for issued for app-pokemon will include favorite_color user attribute.</span></p>
</div><p><span>I created new scope called favourite_color as shown in Figure 21.</span></p><center>
<p><img src="https://i.imgur.com/JE5bDP1.png" alt="" loading="lazy"><br>
<span>Figure 21 - Creating a scope</span></p>
</center><p><span>Then I created a mapper to use a user attribute called favourite_color (Figure 22).</span></p><center>
<p><img src="https://i.imgur.com/cJLebFO.png" alt="" loading="lazy"><br>
<span>Figure 22 - Creating a mapper</span></p>
</center><p><span>And then I added an attribute named </span><strong><span>favorite_colour</span></strong><span> for the user </span><strong><span>sample</span></strong><span> and the value of the created scope in </span><strong><span>app-pokemon</span></strong><span>. As a result, a new claim appeared in the access token, as shown in Figure 23.</span></p><center>
<p><img src="https://i.imgur.com/UhNd9BS.png" alt="" loading="lazy"><br>
<span>Figure 23 - favorite_colour claim in the access token</span></p>
</center><h2 id="References" data-id="References"><a class="anchor hidden-xs" href="#References" title="References"><span class="octicon octicon-link"></span></a><span>References</span></h2><ol>
<li><a href="https://datatracker.ietf.org/doc/html/rfc6749" target="_blank" rel="noopener"><span>RFC6749. The OAuth 2.0 Authorization Framework</span></a></li>
</ol></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Task-1---Preparation" title="Task 1 - Preparation">Task 1 - Preparation</a></li>
<li><a href="#Task-2---Authentication-and-Single-Sign-On" title="Task 2 - Authentication and Single-Sign On">Task 2 - Authentication and Single-Sign On</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Task-1---Preparation" title="Task 1 - Preparation">Task 1 - Preparation</a></li>
<li><a href="#Task-2---Authentication-and-Single-Sign-On" title="Task 2 - Authentication and Single-Sign On">Task 2 - Authentication and Single-Sign On</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
